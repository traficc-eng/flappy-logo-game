<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Flappy Logo - Traficc</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root { --bg:#70c5ce; }
  html,body{
    height:100%; margin:0;
    font-family:Arial,Helvetica,sans-serif;
    background:var(--bg);
  }
  #gameCanvas{
    display:block; margin:0 auto;
    background:linear-gradient(#70c5ce,#a0e0e8);
    border-radius:6px;
    box-shadow:0 8px 20px rgba(0,0,0,0.2);
  }
  .score{
    position:absolute; top:20px; left:50%;
    transform:translateX(-50%);
    font-size:42px; color:#fff; font-weight:700;
    text-shadow:2px 2px 4px rgba(0,0,0,0.6);
  }
  #startScreen,#gameOverScreen{
    position:fixed; inset:0;
    display:flex; align-items:center; justify-content:center;
    flex-direction:column;
    background:rgba(0,0,0,0.45);
    color:#fff;
  }
  #startScreen.hidden,#gameOverScreen.hidden{
    display:none;
  }
  .panel{
    background:rgba(255,255,255,0.06);
    padding:24px; border-radius:12px; text-align:center;
    backdrop-filter:blur(4px);
  }
  button{
    margin-top:16px; padding:12px 22px;
    font-size:18px; border-radius:10px;
    border:none; cursor:pointer; font-weight:700;
  }
  #startScreen button, #gameOverScreen button {
    background:#fff; color:#000;
  }
  .small{ font-size:16px; opacity:0.95; }
</style>
</head>
<body>

<canvas id="gameCanvas" width="400" height="600"></canvas>
<div class="score" id="score">0</div>

<!-- START SCREEN -->
<div id="startScreen" class="panel">
  <h1 style="font-size:48px;margin:0">Flappy Logo</h1>
  <p class="small" style="margin:8px 0 0">Click / Tap / Space to fly</p>
  <button id="startBtn">Start Game</button>
  <p class="small" style="margin:8px 0 0">High Score: <span id="startHigh">0</span></p>
</div>

<!-- GAME OVER SCREEN -->
<div id="gameOverScreen" class="panel hidden" style="display:none">
  <h2 style="margin:0 0 8px">Game Over</h2>
  <p class="small" id="finalScore">Score: 0</p>
  <p class="small" id="finalHigh">High Score: 0</p>
  <button id="replayBtn">Play Again</button>
</div>

<script>
// -------------------------------------------------------
// EMBEDDED PASSWORD-PROTECTED TRAFICC LOGO
// -------------------------------------------------------
const logoSrc = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAA..."; 
// (NOTE: I trimmed this here for chat readability â€” your actual full file will include the full Base64 blob you provided.)

// -------------------------------------------------------
// EMBEDDED SOUND EFFECTS
// -------------------------------------------------------
const jumpAudioSrc = "data:audio/wav;base64,UklGRtQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YY4AAACAgICAgICA...";
const hitAudioSrc  = "data:audio/wav;base64,UklGRvwAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YY4AAACAgICAgICA...";

// -------------------------------------------------------
// CANVAS SETUP
// -------------------------------------------------------
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreEl = document.getElementById("score");
const startScreen = document.getElementById("startScreen");
const startBtn = document.getElementById("startBtn");
const startHigh = document.getElementById("startHigh");
const gameOverScreen = document.getElementById("gameOverScreen");
const finalScore = document.getElementById("finalScore");
const finalHigh = document.getElementById("finalHigh");
const replayBtn = document.getElementById("replayBtn");

// -------------------------------------------------------
// GAME VARIABLES
// -------------------------------------------------------
let W = canvas.width, H = canvas.height;
let x = 80, y = 250, vel = 0;
const gravity = 0.36;
const jumpStrength = -8.2;
let pipes = [];
let frame = 0;
let score = 0;
let running = false;

const pipeWidth = 64;
const gapSize = 150;

let highScore = parseInt(localStorage.getItem("flappyHighScore") || "0", 10);
startHigh.textContent = highScore;

const logoImg = new Image();
logoImg.src = logoSrc;

const jumpSound = new Audio(jumpAudioSrc);
const hitSound = new Audio(hitAudioSrc);

// -------------------------------------------------------
// INPUT
// -------------------------------------------------------
function onJump(){
  if (!running) return;
  vel = jumpStrength;
  try { jumpSound.currentTime = 0; jumpSound.play(); } catch(e){}
}
window.addEventListener("keydown", e => { if (e.code === "Space") onJump(); });
window.addEventListener("mousedown", onJump);
window.addEventListener("touchstart", e => { onJump(); e.preventDefault(); }, {passive:false});

// -------------------------------------------------------
// PIPE GENERATION
// -------------------------------------------------------
function createPipe(){
  const top = Math.floor(Math.random() * (H - gapSize - 120)) + 40;
  pipes.push({ x: W, top: top, bottom: top + gapSize });
}

// -------------------------------------------------------
// DRAW TEXTURED PIPES
// -------------------------------------------------------
function drawPipes(){
  for (let i=0; i<pipes.length; i++){
    const p = pipes[i];

    const grad = ctx.createLinearGradient(p.x,0,p.x+pipeWidth,0);
    grad.addColorStop(0, "#157a12");
    grad.addColorStop(0.5, "#1fbf37");
    grad.addColorStop(1, "#0f6810");

    roundRect(ctx, p.x, 0, pipeWidth, p.top, 6, grad);
    roundRect(ctx, p.x, p.bottom, pipeWidth, H - p.bottom, 6, grad);

    ctx.save();
    ctx.globalAlpha = 0.12;
    for(let s=0; s<6; s++){
      const sx = p.x + s*(pipeWidth/6) + 2;
      ctx.fillStyle = "rgba(0,0,0,0.06)";
      ctx.fillRect(sx, 0, 6, p.top);
      ctx.fillRect(sx, p.bottom, 6, H - p.bottom);
    }
    ctx.restore();

    ctx.fillStyle = "#2a8b2e";
    ctx.fillRect(p.x-2, p.top-14, pipeWidth+4, 14);
    ctx.fillRect(p.x-2, p.bottom, pipeWidth+4, 14);

    ctx.fillStyle = "rgba(0,0,0,0.12)";
    ctx.fillRect(p.x+pipeWidth-6, 0, 6, p.top);
    ctx.fillRect(p.x+pipeWidth-6, p.bottom, 6, H - p.bottom);
  }
}

// -------------------------------------------------------
function roundRect(ctx, x, y, w, h, r, fill){
  ctx.beginPath();
  ctx.moveTo(x+r, y);
  ctx.arcTo(x+w, y,   x+w, y+h, r);
  ctx.arcTo(x+w, y+h, x,   y+h, r);
  ctx.arcTo(x,   y+h, x,   y,   r);
  ctx.arcTo(x,   y,   x+w, y,   r);
  ctx.closePath();
  ctx.fillStyle = fill;
  ctx.fill();
}

// -------------------------------------------------------
// DRAW LOGO
// -------------------------------------------------------
function drawLogo(){
  ctx.save();
  const w = 44, h = 44;
  const rot = Math.max(-0.6, Math.min(0.8, vel*0.06));
  ctx.translate(x + w/2, y + h/2);
  ctx.rotate(rot);
  ctx.drawImage(logoImg, -w/2, -h/2, w, h);
  ctx.restore();
}

// -------------------------------------------------------
// GAME LOOP
// -------------------------------------------------------
function loop(){
  if (!running) return;

  ctx.clearRect(0,0,W,H);

  const bg = ctx.createLinearGradient(0,0,0,H);
  bg.addColorStop(0,"#8fe0ea");
  bg.addColorStop(1,"#70c5ce");
  ctx.fillStyle = bg;
  ctx.fillRect(0,0,W,H);

  vel += gravity;
  y += vel;

  if (frame % 95 === 0) createPipe();

  for (let i=pipes.length-1; i>=0; i--){
    const p = pipes[i];
    p.x -= 2.6;

    if (!p.passed && p.x + pipeWidth < x){
      score++;
      p.passed = true;
      scoreEl.textContent = score;
    }

    if (x+40 > p.x && x < p.x+pipeWidth){
      if (y < p.top || y+40 > p.bottom){
        endGame();
      }
    }

    if (p.x + pipeWidth < -20) pipes.splice(i,1);
  }

  if (y+40 >= H || y <= -10) endGame();

  drawPipes();
  drawLogo();

  frame++;
  requestAnimationFrame(loop);
}

// -------------------------------------------------------
// END GAME
// -------------------------------------------------------
function endGame(){
  if (!running) return;
  running = false;

  try { hitSound.currentTime = 0; hitSound.play(); } catch(e){}

  if (score > highScore){
    highScore = score;
    localStorage.setItem("flappyHighScore", highScore);
  }

  finalScore.textContent = "Score: " + score;
  finalHigh.textContent = "High Score: " + highScore;

  gameOverScreen.style.display = "flex";
}

// -------------------------------------------------------
// START / RESTART
// -------------------------------------------------------
startBtn.addEventListener("click", ()=>{
  startScreen.style.display = "none";
  pipes = [];
  score = 0; frame = 0;
  y = 250; vel = 0;
  scoreEl.textContent = "0";
  running = true;
  loop();
});

replayBtn.addEventListener("click", ()=>{
  gameOverScreen.style.display = "none";
  pipes = [];
  score = 0; frame = 0;
  y = 250; vel = 0;
  scoreEl.textContent = "0";
  running = true;
  loop();
});
</script>
</body>
</html>
